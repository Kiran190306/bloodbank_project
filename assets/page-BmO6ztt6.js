import{C as r}from"./PolymorphicComponent-CPB_qS69.js";import{r as o,o as e,p as J}from"./chunk-JMJ3UQ3L-NvGUjwXk.js";import{D as K,R as Q}from"./droplet-DzP8lk1O.js";import{u as X}from"./useUser-DbfjEQt0.js";import{L as Z,C as ee,a as b,B as q,P as re}from"./plus-D2CmjyWH.js";import{M as f}from"./map-pin-Ci6ZpxQG.js";import{P as j}from"./phone-D1EhqHzX.js";import{H as u,U as $,S as se}from"./users-2-LNlu48.js";import{S as de}from"./search-qL3S1H8t.js";import"./react-Cn0hViU7.js";if(typeof window<"u"){const n={};globalThis.process??(globalThis.process={});const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,l){return l in s?s[l]:void 0},has(){return!0}})}function ae(){var p,I,v,y,w,P,_,S,k,B,R,D,T,A,C,L,V;const{data:n,loading:t}=X(),[s,l]=o.useState(null),[M,O]=o.useState(!0),[N,E]=o.useState([]),[F,H]=o.useState([]),[i,G]=o.useState(null);o.useEffect(()=>{!t&&n?(async()=>{var a,x,U;try{const m=await fetch("/api/profile");if(m.ok){const h=await m.json();l(h),((a=h.userProfile)==null?void 0:a.user_type)==="donor"?W():((x=h.userProfile)==null?void 0:x.user_type)==="hospital"?Y():((U=h.userProfile)==null?void 0:U.user_type)==="admin"&&z()}else window.location.href="/onboarding"}catch(m){console.error(m)}finally{O(!1)}})():!t&&!n&&(window.location.href="/account/signin")},[n,t]);const W=async()=>{try{const d=await fetch("/api/blood-requests?status=active");if(d.ok){const a=await d.json();E(a.requests.slice(0,5))}}catch(d){console.error(d)}},Y=async()=>{var d;try{if(!((d=s==null?void 0:s.additionalProfile)!=null&&d.id))return;const a=await fetch(`/api/blood-banks/${s.additionalProfile.id}`);if(a.ok){const x=await a.json();H(x.stock||[])}}catch(a){console.error(a)}},z=async()=>{try{const d=await fetch("/api/admin/reports");if(d.ok){const a=await d.json();G(a.stats)}}catch(d){console.error(d)}},g=({type:d})=>{const a={"A+":"bg-red-100 text-red-700","A-":"bg-red-100 text-red-700","B+":"bg-blue-100 text-blue-700","B-":"bg-blue-100 text-blue-700","AB+":"bg-purple-100 text-purple-700","AB-":"bg-purple-100 text-purple-700","O+":"bg-green-100 text-green-700","O-":"bg-green-100 text-green-700"};return e.jsx(r,{className:`px-3 py-1 rounded-full text-sm font-semibold ${a[d]||"bg-gray-100 text-gray-700"}`,renderId:"render-98cd48ae",as:"span",children:d})};if(M||t)return e.jsx(r,{className:"flex min-h-screen items-center justify-center bg-gray-50",renderId:"render-d3838862",as:"div",children:e.jsx(r,{className:"text-gray-600",renderId:"render-4ff2d163",as:"div",children:"Loading..."})});const c=(p=s==null?void 0:s.userProfile)==null?void 0:p.user_type;return e.jsxs(r,{className:"min-h-screen bg-gray-50",renderId:"render-40dab4b1",as:"div",children:[e.jsx(r,{className:"border-b border-gray-200 bg-white",renderId:"render-8e7bd052",as:"nav",children:e.jsx(r,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",renderId:"render-e54ecbef",as:"div",children:e.jsxs(r,{className:"flex justify-between items-center h-16",renderId:"render-f238bd14",as:"div",children:[e.jsxs(r,{href:"/",className:"flex items-center gap-2",renderId:"render-880ad735",as:"a",children:[e.jsx(r,{className:"bg-red-600 p-2 rounded-lg",renderId:"render-ed35efe7",as:"div",children:e.jsx(K,{className:"w-6 h-6 text-white"})}),e.jsx(r,{className:"text-xl font-bold text-gray-900",renderId:"render-546c132b",as:"span",children:"BloodConnect"})]}),e.jsxs(r,{className:"flex items-center gap-4",renderId:"render-f2c5a12e",as:"div",children:[e.jsx(r,{href:"/search",className:"text-gray-700 hover:text-red-600 font-medium",renderId:"render-a156aa5f",as:"a",children:"Search Blood"}),e.jsx(r,{href:"/emergency",className:"text-gray-700 hover:text-red-600 font-medium",renderId:"render-3f9fca7b",as:"a",children:"Emergency Request"}),e.jsxs(r,{href:"/account/logout",className:"flex items-center gap-2 text-gray-700 hover:text-red-600 font-medium",renderId:"render-bb7f9617",as:"a",children:[e.jsx(Z,{className:"w-4 h-4"}),"Sign Out"]})]})]})})}),e.jsxs(r,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",renderId:"render-62a8878d",as:"div",children:[e.jsxs(r,{className:"mb-8",renderId:"render-b942b663",as:"div",children:[e.jsxs(r,{className:"text-3xl font-bold text-gray-900 mb-2",renderId:"render-c3e47944",as:"h1",children:["Welcome back, ",((I=s==null?void 0:s.userProfile)==null?void 0:I.full_name)||(n==null?void 0:n.name),"!"]}),e.jsxs(r,{className:"text-gray-600",renderId:"render-20de067a",as:"p",children:[c==="donor"&&"Thank you for being a life-saver",c==="hospital"&&"Manage your blood bank inventory",c==="admin"&&"System administration dashboard"]})]}),c==="donor"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{className:"grid md:grid-cols-3 gap-6 mb-8",renderId:"render-89058753",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6 md:col-span-2",renderId:"render-7e430f56",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between mb-4",renderId:"render-e57f170c",as:"div",children:[e.jsxs(r,{renderId:"render-e20a89df",as:"div",children:[e.jsx(r,{className:"text-xl font-semibold text-gray-900 mb-1",renderId:"render-e1a0646f",as:"h2",children:"Your Donor Profile"}),(v=s==null?void 0:s.additionalProfile)!=null&&v.is_verified?e.jsx(r,{className:"text-sm text-green-600 font-medium",renderId:"render-4d634201",as:"span",children:"✓ Verified Donor"}):e.jsx(r,{className:"text-sm text-yellow-600 font-medium",renderId:"render-5e7ab4bb",as:"span",children:"⏳ Pending Verification"})]}),e.jsx(g,{type:(y=s==null?void 0:s.additionalProfile)==null?void 0:y.blood_group})]}),e.jsxs(r,{className:"grid md:grid-cols-2 gap-4 text-sm",renderId:"render-faf700f4",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-2 text-gray-600",renderId:"render-c843f284",as:"div",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs(r,{renderId:"render-65c9cc24",as:"span",children:[(w=s==null?void 0:s.additionalProfile)==null?void 0:w.city,((P=s==null?void 0:s.additionalProfile)==null?void 0:P.state)&&`, ${s.additionalProfile.state}`]})]}),e.jsxs(r,{className:"flex items-center gap-2 text-gray-600",renderId:"render-a1f624da",as:"div",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-fe8059d6",as:"span",children:((_=s==null?void 0:s.userProfile)==null?void 0:_.phone)||"Not provided"})]}),((S=s==null?void 0:s.additionalProfile)==null?void 0:S.last_donation_date)&&e.jsxs(r,{className:"flex items-center gap-2 text-gray-600",renderId:"render-d6c70687",as:"div",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsxs(r,{renderId:"render-27236647",as:"span",children:["Last donation:"," ",new Date(s.additionalProfile.last_donation_date).toLocaleDateString()]})]}),e.jsxs(r,{className:"flex items-center gap-2",renderId:"render-a3d49fac",as:"div",children:[e.jsx(u,{className:`w-4 h-4 ${(k=s==null?void 0:s.additionalProfile)!=null&&k.is_available?"text-green-600":"text-gray-400"}`}),e.jsx(r,{className:(B=s==null?void 0:s.additionalProfile)!=null&&B.is_available?"text-green-600 font-medium":"text-gray-600",renderId:"render-ad7a903c",as:"span",children:(R=s==null?void 0:s.additionalProfile)!=null&&R.is_available?"Available to donate":"Not available"})]})]})]}),e.jsxs(r,{className:"bg-gradient-to-br from-red-600 to-red-700 rounded-lg shadow-md p-6 text-white",renderId:"render-abb52bb3",as:"div",children:[e.jsx(u,{className:"w-12 h-12 mb-4 opacity-80"}),e.jsx(r,{className:"text-2xl font-bold mb-2",renderId:"render-2c0907c0",as:"h3",children:"Save Lives"}),e.jsx(r,{className:"text-red-100 mb-4",renderId:"render-6a040603",as:"p",children:"Your donation can save up to 3 lives"}),e.jsx(r,{href:"/emergency",className:"inline-block bg-white text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-red-50",renderId:"render-bf029e8d",as:"a",children:"View Requests"})]})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-c537392e",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-6",renderId:"render-ab4f1c8e",as:"div",children:[e.jsx(r,{className:"text-xl font-semibold text-gray-900",renderId:"render-3a803a80",as:"h2",children:"Active Blood Requests"}),e.jsx(r,{href:"/emergency",className:"text-red-600 hover:text-red-700 font-medium text-sm",renderId:"render-e59ebd92",as:"a",children:"View All →"})]}),N.length===0?e.jsx(r,{className:"text-center py-8 text-gray-500",renderId:"render-94741db9",as:"div",children:"No active requests at the moment"}):e.jsx(r,{className:"space-y-4",renderId:"render-c0759201",as:"div",children:N.map(d=>e.jsxs(r,{className:"border border-gray-200 rounded-lg p-4 hover:border-red-300 transition-colors",renderId:"render-233dc0db",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between mb-2",renderId:"render-dac47941",as:"div",children:[e.jsxs(r,{renderId:"render-57ec5ae7",as:"div",children:[e.jsx(r,{className:"font-semibold text-gray-900",renderId:"render-28d3f38e",as:"h3",children:d.patient_name}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-332b9522",as:"p",children:d.hospital_name||"Hospital not specified"})]}),e.jsxs(r,{className:"flex items-center gap-2",renderId:"render-0d6dd6b3",as:"div",children:[e.jsx(g,{type:d.blood_group}),d.urgency_level==="critical"&&e.jsx(r,{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-full",renderId:"render-8973e047",as:"span",children:"CRITICAL"})]})]}),e.jsxs(r,{className:"flex items-center gap-4 text-sm text-gray-600",renderId:"render-d080fa6f",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-1",renderId:"render-50b604fb",as:"div",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-ecddbc53",as:"span",children:d.city})]}),e.jsxs(r,{className:"flex items-center gap-1",renderId:"render-65234478",as:"div",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsxs(r,{renderId:"render-fed8847b",as:"span",children:[d.units_needed," units needed"]})]}),e.jsxs(r,{className:"flex items-center gap-1",renderId:"render-f0a3eb4c",as:"div",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-d8ebaa86",as:"span",children:d.contact_phone})]})]})]},d.id))})]})]}),c==="hospital"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6 mb-8",renderId:"render-9a26b5e4",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between mb-4",renderId:"render-a28dc243",as:"div",children:[e.jsxs(r,{renderId:"render-761e84ae",as:"div",children:[e.jsx(r,{className:"text-xl font-semibold text-gray-900 mb-1",renderId:"render-c941ddc7",as:"h2",children:(D=s==null?void 0:s.additionalProfile)==null?void 0:D.hospital_name}),(T=s==null?void 0:s.additionalProfile)!=null&&T.is_verified?e.jsx(r,{className:"text-sm text-green-600 font-medium",renderId:"render-ba8e2307",as:"span",children:"✓ Verified Blood Bank"}):e.jsx(r,{className:"text-sm text-yellow-600 font-medium",renderId:"render-39bfdae6",as:"span",children:"⏳ Pending Verification"})]}),e.jsx(q,{className:"w-8 h-8 text-red-600"})]}),e.jsxs(r,{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",renderId:"render-b6db931a",as:"div",children:[e.jsxs(r,{className:"flex items-start gap-2",renderId:"render-a75b592e",as:"div",children:[e.jsx(f,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs(r,{renderId:"render-fe9e937f",as:"span",children:[(A=s==null?void 0:s.additionalProfile)==null?void 0:A.address,","," ",(C=s==null?void 0:s.additionalProfile)==null?void 0:C.city,((L=s==null?void 0:s.additionalProfile)==null?void 0:L.state)&&`, ${s.additionalProfile.state}`]})]}),e.jsxs(r,{className:"flex items-center gap-2",renderId:"render-d62a855d",as:"div",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-dfc37857",as:"span",children:((V=s==null?void 0:s.additionalProfile)==null?void 0:V.phone)||"Not provided"})]})]})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6 mb-8",renderId:"render-595f1f81",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-6",renderId:"render-dc98b88e",as:"div",children:[e.jsx(r,{className:"text-xl font-semibold text-gray-900",renderId:"render-8aca1e4f",as:"h2",children:"Blood Stock Inventory"}),e.jsxs(r,{className:"text-red-600 hover:text-red-700 font-medium text-sm flex items-center gap-1",renderId:"render-bcb5ad68",as:"button",children:[e.jsx(re,{className:"w-4 h-4"}),"Update Stock"]})]}),e.jsx(r,{className:"grid md:grid-cols-4 gap-4",renderId:"render-39b0a67e",as:"div",children:F.map(d=>e.jsxs(r,{className:"border border-gray-200 rounded-lg p-4 text-center",renderId:"render-ed4bf660",as:"div",children:[e.jsx(g,{type:d.blood_group}),e.jsxs(r,{className:"mt-3",renderId:"render-0d256f1e",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-gray-900",renderId:"render-4145a36d",as:"div",children:d.units_available}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-9ea8edec",as:"div",children:"units available"})]}),e.jsxs(r,{className:"mt-2 text-xs text-gray-500",renderId:"render-73d3d61a",as:"div",children:["Updated ",new Date(d.last_updated).toLocaleDateString()]})]},d.blood_group))})]}),e.jsxs(r,{className:"grid md:grid-cols-2 gap-6",renderId:"render-dc3de0e2",as:"div",children:[e.jsxs(r,{href:"/emergency",className:"bg-gradient-to-br from-red-600 to-red-700 rounded-lg shadow-md p-6 text-white hover:from-red-700 hover:to-red-800 transition-colors",renderId:"render-1dcf25ba",as:"a",children:[e.jsx(b,{className:"w-10 h-10 mb-3 opacity-80"}),e.jsx(r,{className:"text-xl font-bold mb-2",renderId:"render-465d0bd5",as:"h3",children:"Create Emergency Request"}),e.jsx(r,{className:"text-red-100",renderId:"render-f69b90a1",as:"p",children:"Post an urgent blood requirement"})]}),e.jsxs(r,{href:"/search",className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-md p-6 text-white hover:from-blue-700 hover:to-blue-800 transition-colors",renderId:"render-3acdcbbf",as:"a",children:[e.jsx(de,{className:"w-10 h-10 mb-3 opacity-80"}),e.jsx(r,{className:"text-xl font-bold mb-2",renderId:"render-6f89d4b0",as:"h3",children:"Find Donors"}),e.jsx(r,{className:"text-blue-100",renderId:"render-842987fc",as:"p",children:"Search for available blood donors"})]})]})]}),c==="admin"&&i&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{className:"grid md:grid-cols-4 gap-6 mb-8",renderId:"render-4b0d451b",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-a583d059",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-d11eb46e",as:"div",children:[e.jsx($,{className:"w-8 h-8 text-red-600"}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-869342c1",as:"span",children:"Total"})]}),e.jsx(r,{className:"text-3xl font-bold text-gray-900",renderId:"render-bb94f423",as:"div",children:i.donors.total}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-24f690b5",as:"div",children:"Registered Donors"}),e.jsxs(r,{className:"mt-2 text-xs text-green-600",renderId:"render-68c43d9e",as:"div",children:[i.donors.verified," verified"]})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-210eb330",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-151d6204",as:"div",children:[e.jsx(q,{className:"w-8 h-8 text-blue-600"}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-93e9034b",as:"span",children:"Total"})]}),e.jsx(r,{className:"text-3xl font-bold text-gray-900",renderId:"render-42a36599",as:"div",children:i.bloodBanks.total}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-19b71585",as:"div",children:"Blood Banks"}),e.jsxs(r,{className:"mt-2 text-xs text-green-600",renderId:"render-e92de0ce",as:"div",children:[i.bloodBanks.verified," verified"]})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-28d4b55a",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-45685b2e",as:"div",children:[e.jsx(b,{className:"w-8 h-8 text-orange-600"}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-03bb3a78",as:"span",children:"Active"})]}),e.jsx(r,{className:"text-3xl font-bold text-gray-900",renderId:"render-60472fd5",as:"div",children:i.requests.active}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-23685654",as:"div",children:"Blood Requests"}),e.jsxs(r,{className:"mt-2 text-xs text-red-600",renderId:"render-2a48e959",as:"div",children:[i.requests.critical," critical"]})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-73369144",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-f2b485b4",as:"div",children:[e.jsx(u,{className:"w-8 h-8 text-green-600"}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-01251b48",as:"span",children:"Total"})]}),e.jsx(r,{className:"text-3xl font-bold text-gray-900",renderId:"render-609b485e",as:"div",children:i.donations.total}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-577f3832",as:"div",children:"Donations"}),e.jsxs(r,{className:"mt-2 text-xs text-green-600",renderId:"render-69fdce50",as:"div",children:[i.donations.thisMonth," this month"]})]})]}),e.jsxs(r,{className:"grid md:grid-cols-3 gap-6",renderId:"render-5e221d10",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-b0012912",as:"div",children:[e.jsx(se,{className:"w-10 h-10 text-red-600 mb-3"}),e.jsx(r,{className:"text-lg font-semibold text-gray-900 mb-2",renderId:"render-12a15b86",as:"h3",children:"Verify Users"}),e.jsx(r,{className:"text-gray-600 text-sm mb-4",renderId:"render-5abe2af4",as:"p",children:"Review and verify donor and hospital registrations"}),e.jsx(r,{className:"text-red-600 hover:text-red-700 font-medium text-sm",renderId:"render-b26d67f5",as:"button",children:"Manage Verifications →"})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-500fb6de",as:"div",children:[e.jsx($,{className:"w-10 h-10 text-blue-600 mb-3"}),e.jsx(r,{className:"text-lg font-semibold text-gray-900 mb-2",renderId:"render-17dc5e29",as:"h3",children:"Manage Users"}),e.jsx(r,{className:"text-gray-600 text-sm mb-4",renderId:"render-734d1234",as:"p",children:"View and manage all registered users"}),e.jsx(r,{className:"text-blue-600 hover:text-blue-700 font-medium text-sm",renderId:"render-57cb79af",as:"button",children:"View Users →"})]}),e.jsxs(r,{className:"bg-white rounded-lg shadow-md p-6",renderId:"render-c19ea12c",as:"div",children:[e.jsx(b,{className:"w-10 h-10 text-orange-600 mb-3"}),e.jsx(r,{className:"text-lg font-semibold text-gray-900 mb-2",renderId:"render-60ecc28d",as:"h3",children:"View Reports"}),e.jsx(r,{className:"text-gray-600 text-sm mb-4",renderId:"render-63700c83",as:"p",children:"Generate and view system reports"}),e.jsx(r,{className:"text-orange-600 hover:text-orange-700 font-medium text-sm",renderId:"render-bace99d7",as:"button",children:"Generate Report →"})]})]})]})]})]})}if(typeof window<"u"){const n={};globalThis.process??(globalThis.process={});const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,l){return l in s?s[l]:void 0},has(){return!0}})}const ge=J(function(t){return e.jsx(Q,{children:e.jsx(ae,{...t})})});export{ge as default};
